<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TRON LEGACY ‚Ä¢ POK√âMON CENTER DROP WAR ROOM</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Rajdhani:wght@600&display=swap" rel="stylesheet">
  <style>
    :root {
      --tron-blue: #00f0ff;
      --tron-dark: #0b1a2b;
      --tron-glow: 0 0 20px #00f0ff;
      --tron-glow-intense: 0 0 40px #00f0ff, 0 0 80px #00f0ff;
      --alert-red: #ff0066;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      background: radial-gradient(circle at 50% 50%, #0d1e33 0%, #000 100%);
      color: var(--tron-blue);
      font-family: 'Rajdhani', sans-serif;
      overflow-x: hidden;
      min-height: 100vh;
      position: relative;
    }
    /* Animated Grid Background */
    .grid {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: repeating-linear-gradient(0deg, transparent, transparent 50px, #11223322 50px, #11223322 51px),
                  repeating-linear-gradient(90deg, transparent, transparent 50px, #11223322 50px, #11223322 51px);
      animation: gridPulse 20s linear infinite;
      pointer-events: none;
      z-index: 0;
    }
    @keyframes gridPulse { 0% { opacity: 0.3; } 50% { opacity: 0.7; } 100% { opacity: 0.3; } }

    header {
      text-align: center;
      padding: 40px 20px;
      position: relative;
      z-index: 10;
    }
    h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 4.5rem;
      letter-spacing: 12px;
      text-transform: uppercase;
      text-shadow: var(--tron-glow-intense);
      animation: titleGlow 4s infinite alternate;
    }
    @keyframes titleGlow {
      from { text-shadow: 0 0 20px #00f0ff; }
      to { text-shadow: 0 0 60px #00ffff, 0 0 100px #00ffff; }
    }
    .subtitle {
      font-size: 1.6rem;
      margin-top: 10px;
      opacity: 0.9;
      letter-spacing: 4px;
    }
    .status-bar {
      background: rgba(0,20,40,0.8);
      padding: 15px;
      text-align: center;
      border-bottom: 2px solid var(--tron-blue);
      box-shadow: var(--tron-glow);
      position: relative;
      z-index: 10;
    }
    .live-dot {
      display: inline-block;
      width: 14px; height: 14px;
      background: var(--alert-red);
      border-radius: 50%;
      box-shadow: 0 0 20px var(--alert-red);
      animation: pulseDot 1.5s infinite;
      margin-right: 10px;
    }
    @keyframes pulseDot { 0%,100% { opacity:1; } 50% { opacity:0.4; } }

    .container {
      max-width: 1400px;
      margin: 30px auto;
      padding: 0 20px;
      position: relative;
      z-index: 10;
    }
    .card {
      background: rgba(10,30,60,0.6);
      border: 1px solid var(--tron-blue);
      border-radius: 16px;
      padding: 25px;
      margin: 20px 0;
      box-shadow: var(--tron-glow);
      backdrop-filter: blur(12px);
      position: relative;
      overflow: hidden;
    }
    .card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; height: 4px;
      background: linear-gradient(90deg, transparent, var(--tron-blue), transparent);
      animation: scanline 6s linear infinite;
    }
    @keyframes scanline { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }

    .tweets-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
      gap: 20px;
    }
    .tweet {
      background: rgba(0,15,40,0.7);
      border: 1px solid #005577;
      border-radius: 12px;
      padding: 18px;
      transition: all 0.4s;
      position: relative;
      overflow: hidden;
    }
    .tweet.fresh {
      border: 2px solid var(--alert-red) !important;
      box-shadow: 0 0 40px var(--alert-red) !important;
      animation: freshPulse 2s infinite;
      transform: scale(1.03);
    }
    @keyframes freshPulse {
      0%,100% { box-shadow: 0 0 40px var(--alert-red); }
      50% { box-shadow: 0 0 80px var(--alert-red); }
    }
    .tweet-header {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
    }
    .tweet-header img {
      border-radius: 50%;
      width: 56px;
      height: 56px;
      border: 2px solid var(--tron-blue);
      box-shadow: var(--tron-glow);
    }
    .user-info {
      margin-left: 12px;
      flex: 1;
    }
    .username {
      font-weight: bold;
      color: var(--tron-blue);
      font-size: 1.2rem;
    }
    .time {
      font-size: 0.9rem;
      opacity: 0.7;
    }
    .tweet-text {
      line-height: 1.6;
      margin: 12px 0;
      font-size: 1.1rem;
    }
    .tweet-link {
      color: var(--tron-blue);
      text-decoration: none;
      font-weight: bold;
    }
    .tweet-link:hover { text-shadow: var(--tron-glow); }

    .last-drop {
      background: rgba(255,0,102,0.2);
      border: 1px solid var(--alert-red);
      text-align: center;
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
      font-size: 1.1rem;
    }
    .last-drop .time-ago {
      font-weight: bold;
      color: var(--alert-red);
      text-shadow: 0 0 10px var(--alert-red);
    }

    .info-panel {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .info-card {
      background: rgba(0,15,40,0.5);
      border: 1px solid var(--tron-blue);
      border-radius: 12px;
      padding: 15px;
      text-align: center;
    }
    .info-card h3 {
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 10px;
      text-shadow: var(--tron-glow);
    }

    .sound-btn {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 70px;
      height: 70px;
      background: var(--alert-red);
      border-radius: 50%;
      border: none;
      font-size: 36px;
      color: white;
      box-shadow: 0 0 40px var(--alert-red);
      cursor: pointer;
      z-index: 999;
      animation: float 4s infinite ease-in-out;
    }
    @keyframes float { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

    footer {
      text-align: center;
      padding: 40px;
      font-size: 0.9rem;
      opacity: 0.6;
      margin-top: 50px;
    }
  </style>
</head>
<body>

  <div class="grid"></div>

  <header>
    <h1>TRON WAR ROOM</h1>
    <div class="subtitle">Pok√©mon Center Drop Intelligence ‚Ä¢ Real-Time Grid</div>
  </header>

  <div class="status-bar">
    <span class="live-dot"></span>
    <strong>LIVE SCANNING GRID</strong> ‚Ä¢ Last update: <span id="last-update">‚Äî</span>
  </div>

  <div class="container">
    <div class="card">
      <h2 style="text-align:center; margin-bottom:20px; font-family:Orbitron;">üìä WAR ROOM DASHBOARD</h2>
      <div class="info-panel" id="info-panel">
        <!-- Dynamic info will load here -->
      </div>
    </div>

    <div class="card">
      <h2 style="text-align:center; margin-bottom:20px; font-family:Orbitron;">üî• LATEST DROP INTEL (under 6 minutes = RED ALERT)</h2>
      <div class="last-drop" id="last-drop-info" style="display:none;">
        <strong>üïê LAST DROP DETECTED:</strong> <span id="last-drop-time" class="time-ago"></span><br>
        <small id="last-drop-details"></small>
      </div>
      <div class="tweets-grid" id="results">Loading the grid‚Ä¶</div>
    </div>
  </div>

  <button class="sound-btn" id="soundToggle">üîä</button>

  <footer>
    TRON LEGACY DROP WAR ROOM ‚Ä¢ Zero accounts ‚Ä¢ Zero lag ‚Ä¢ Maximum style<br>
    Built for the fastest collectors in the metaverse.
  </footer>

  <script>
    const keywords = [
      "pokemon center drop", "pok√©mon center drop", "pokemoncenter drop", "pc drop",
      "pokemoncenter live", "just went live", "queue live", "pokemon center queue",
      "restock live", "LIVE pokemoncenter", "in stock pokemoncenter", "drop incoming",
      "shrouded fable", "charizard ex", "crown zenith", "surging sparks", "combined powers", "prismatic etb",
      "destined rivals", "fall 2025 collector chest"
    ];

    let soundEnabled = true;
    const alertSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3");
    let lastDropTime = null; // Track last drop timestamp

    document.getElementById("soundToggle").addEventListener("click", () => {
      soundEnabled = !soundEnabled;
      document.getElementById("soundToggle").textContent = soundEnabled ? "üîä" : "üîá";
    });

    function updateLastDropDisplay() {
      const lastDropEl = document.getElementById("last-drop-info");
      const timeEl = document.getElementById("last-drop-time");
      const detailsEl = document.getElementById("last-drop-details");
      if (lastDropTime) {
        const now = Date.now();
        const diffMin = Math.round((now - lastDropTime) / 60000);
        lastDropEl.style.display = "block";
        timeEl.textContent = diffMin === 1 ? "1 minute ago" : `${diffMin} minutes ago`;
        detailsEl.textContent = "Queue live ‚Äì Check pokemoncenter.com NOW!";
      } else {
        lastDropEl.style.display = "none";
      }
    }

    function updateInfoPanel() {
      const panel = document.getElementById("info-panel");
      panel.innerHTML = `
        <div class="info-card">
          <h3>üõ°Ô∏è UPCOMING DROPS</h3>
          <p>Fall 2025 Collector Chest ‚Äì Dec 5<br>Phantasmal Flames ‚Äì Nov 14 (Restock?)</p>
        </div>
        <div class="info-card">
          <h3>üìà TRENDS</h3>
          <p>Tuesdays 10AM PT: 70% drops<br>Queue spikes = 99% signal</p>
        </div>
        <div class="info-card">
          <h3>üîó QUICK LINKS</h3>
          <p><a href="https://www.pokemoncenter.com/" style="color:var(--tron-blue);">Shop Now</a><br><a href="https://discord.gg/trackalacker" style="color:var(--tron-blue);">Join Discord</a></p>
        </div>
      `;
    }

    async function fetchIntel() {
      const container = document.getElementById("results");
      document.getElementById("last-update").textContent = new Date().toLocaleTimeString();

      try {
        const proxyUrl = "https://api.allorigins.ml/get?url=" + encodeURIComponent(
          "https://api.twitter.com/2/tweets/search/recent?query=" +
          encodeURIComponent(keywords.map(k => `"${k}"`).join(" OR ") + " -is:retweet lang:en") +
          "&tweet.fields=created_at,author_id&expansions=author_id&user.fields=username,name,profile_image_url&max_results=100"
        );

        const resp = await fetch(proxyUrl);
        const data = await resp.json();
        const tweets = JSON.parse(data.contents);

        if (!tweets.data || tweets.data.length === 0) {
          container.innerHTML = "<p style='text-align:center;grid-column:1/-1;font-size:2rem;'>Grid quiet‚Ä¶ No drops detected.</p>";
          return;
        }

        const users = {};
        tweets.includes?.users?.forEach(u => users[u.id] = u);

        const now = Date.now();
        let hasFreshDrop = false;
        container.innerHTML = tweets.data
          .sort((a, b) => new Date(b.created_at) - new Date(a.created_at))
          .map(tweet => {
            const user = users[tweet.author_id] || {};
            const ageMin = Math.round((now - new Date(tweet.created_at)) / 60000);
            const isFresh = ageMin <= 6; // Updated to 6 min
            if (isFresh && tweet.text.toLowerCase().includes('queue') && !hasFreshDrop) {
              lastDropTime = new Date(tweet.created_at).getTime();
              hasFreshDrop = true;
            }
            if (isFresh && soundEnabled) {
              alertSound.currentTime = 0;
              alertSound.play();
            }

            return `
              <div class="tweet ${isFresh ? 'fresh' : ''}">
                <div class="tweet-header">
                  <img src="${(user.profile_image_url || '').replace('_normal', '')}" alt="">
                  <div class="user-info">
                    <div class="username">@${user.username || 'unknown'}</div>
                    <div class="time">${ageMin < 1 ? 'Just now' : ageMin + ' min ago'}</div>
                  </div>
                </div>
                <div class="tweet-text">${tweet.text.replace(/\n/g, '<br>')}</div>
                <a href="https://twitter.com/${user.username}/status/${tweet.id}" target="_blank" class="tweet-link">
                  ‚ö° OPEN IN GRID ‚Üí
                </a>
              </div>`;
          }).join("");

        if (hasFreshDrop) {
          updateLastDropDisplay();
        }

      } catch (e) {
        container.innerHTML = "<p style='text-align:center;grid-column:1/-1;color:var(--alert-red);'>GRID OFFLINE ‚Ä¢ Reconnecting‚Ä¶</p>";
      }
    }

    // Initialize
    updateInfoPanel();
    updateLastDropDisplay();
    fetchIntel();
    setInterval(() => {
      fetchIntel();
      updateLastDropDisplay();
    }, 15000); // Every 15 seconds
  </script>
</body>
</html>
