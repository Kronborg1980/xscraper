<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>POKÉMON COMMAND CENTER</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Inter:wght@300;500&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0a0e17;
    --glass:rgba(15,30,70,0.45);
    --glass2:rgba(20,40,90,0.65);
    --border:rgba(0,255,255,0.4);
    --cyan:#00ffff;
    --neon:#00faff;
    --pink:#ff00cc;
    --text:#e0ffff;
  }
  *{margin:0;padding:0;box-sizing:border-box;}
  body{
    background:var(--bg);
    color:var(--text);
    font-family:'Inter',sans-serif;
    min-height:100vh;
    overflow:hidden;
    position:relative;
  }

  /* Animated LED background */
  body::before{
    content:"";
    position:absolute;
    inset:0;
    background:
      repeating-linear-gradient(90deg,transparent,transparent 50px,#00ffff08 50px,#00ffff08 52px),
      repeating-linear-gradient(0deg,transparent,transparent 50px,#00ffff08 50px,#00ffff08 52px);
    animation:led 20s linear infinite;
    pointer-events:none;
    z-index:1;
  }
  @keyframes led{
    0%{transform:translate(0,0);}
    100%{transform:translate(50px,50px);}
  }

  header{
    text-align:center;
    padding:50px 20px 40px;
    position:relative;
    z-index:10;
  }
  h1{
    font-family:'Orbitron',sans-serif;
    font-size:clamp(3rem,10vw,6rem);
    letter-spacing:0.4em;
    background:linear-gradient(90deg,#00ffff,#ff00ff,#00ffff);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    text-shadow:0 0 60px #00ffff;
    animation:glow 3s infinite alternate;
  }
  @keyframes glow{to{text-shadow:0 0 100px #00ffff,0 0 150px #00ffff;}}

  /* Queue status – premium glass pill with LED border */
  #queue{
    position:fixed;top:20px;right:20px;
    display:flex;align-items:center;gap:14px;
    background:var(--glass2);
    border:2px solid var(--border);
    border-radius:50px;
    padding:12px 26px;
    backdrop-filter:blur(30px);
    font-family:'Orbitron',sans-serif;
    font-size:1.3rem;
    z-index:999;
    box-shadow:0 0 40px rgba(0,255,255,0.3);
    position:relative;
    overflow:hidden;
    transition:all 0.6s;
  }
  #queue::before{
    content:"";
    position:absolute;
    top:-2px;left:-100%;
    width:50%;height:4px;
    background:linear-gradient(90deg,transparent,#00ffff,transparent);
    animation:scan 3s linear infinite;
  }
  @keyframes scan{0%{left:-100%;}100%{left:100%;}}
  #queue.live{
    border-color:var(--pink);
    box-shadow:0 0 80px rgba(255,0,204,0.6);
    background:rgba(255,0,204,0.15);
  }
  #queueIcon{font-size:2rem;}

  .container{
    max-width:1200px;margin:0 auto;padding:20px;
    display:grid;grid-template-columns:1fr 1fr;gap:34px;
    position:relative;z-index:10;
  }
  @media(max-width:900px){.container{grid-template-columns:1fr;}}

  .card{
    background:var(--glass);
    border:2px solid var(--border);
    border-radius:28px;
    padding:36px;
    backdrop-filter:blur(40px);
    box-shadow:0 20px 60px rgba(0,0,0,0.6),
               inset 0 0 80px rgba(0,255,255,0.08);
    position:relative;
    overflow:hidden;
    transition:0.5s;
  }
  .card::before{
    content:"";
    position:absolute;
    top:0;left:-100%;
    width:100%;height:3px;
    background:linear-gradient(90deg,transparent,var(--cyan),transparent);
    transition:0.8s;
  }
  .card:hover::before{left:100%;}
  .card:hover{
    transform:translateY(-12px);
    box-shadow:0 30px 80px rgba(0,255,255,0.25),
               inset 0 0 100px rgba(0,255,255,0.12);
  }
  .card h2{
    font-family:'Orbitron',sans-serif;
    font-size:1.8rem;
    margin-bottom:20px;
    color:var(--cyan);
    text-shadow:0 0 20px rgba(0,255,255,0.6);
  }

  .intel-item{
    background:rgba(0,0,0,0.35);
    padding:18px;
    border-radius:16px;
    margin:12px 0;
    border-left:5px solid var(--border);
    transition:0.3s;
  }
  .intel-item.fresh{
    border-left-color:var(--pink);
    background:rgba(255,0,204,0.15);
    box-shadow:0 0 40px rgba(255,0,204,0.2);
  }

  /* LED FABs */
  .fab{
    position:fixed;bottom:40px;right:40px;
    display:flex;flex-direction:column;gap:20px;z-index:999;
  }
  .fab button{
    width:70px;height:70px;
    border-radius:50%;
    background:var(--glass2);
    border:3px solid var(--border);
    color:var(--text);
    font-size:2rem;
    cursor:pointer;
    backdrop-filter:blur(30px);
    box-shadow:0 15px 40px rgba(0,0,0,0.7),
               0 0 40px rgba(0,255,255,0.4);
    transition:all 0.4s;
  }
  .fab button:hover{
    transform:scale(1.2) translateY(-8px);
    box-shadow:0 25px 60px rgba(0,255,255,0.6);
  }
  .fab .site{
    background:linear-gradient(135deg,var(--cyan),var(--pink));
    color:#000;
    font-weight:bold;
  }
</style>
</head>
<body>

<header>
  <h1>COMMAND CENTER</h1>
</header>

<div id="queue">
  <span id="queueIcon">Green Circle</span>
  <span id="queueLabel">NO QUEUE</span>
</div>

<div class="container">

  <div class="card">
    <h2>NEXT DROP</h2>
    <p style="font-size:1.25rem;line-height:1.9;">
      <strong>December 5 – 10:00 AM PT</strong><br>
      Holiday Calendar 2025 • Mega Venusaur Premium Collection<br>
      Kangaskhan ex Box + heavy restocks
    </p>
    <p style="margin-top:20px;font-size:0.95rem;opacity:0.7;">
      Source: PokeBeach • Serebii • PokemonRestocks
    </p>
  </div>

  <div class="card">
    <h2>LIVE X FEED</h2>
    <div id="feed">Loading live signals...</div>
  </div>

</div>

<div class="fab">
  <button class="site" onclick="window.open('https://www.pokemoncenter.com','_blank')" title="Open Site">GO</button>
  <button onclick="location.reload()" title="Refresh">Refresh</button>
  <button id="soundBtn" title="Sound">Sound</button>
  <button onclick="Notification.requestPermission()" title="Alerts">Bell</button>
</div>

<script>
  const sound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-sci-fi-interface-beep-1007.mp3');
  let queueLive = false;
  let soundOn = true;

  document.getElementById('soundBtn').onclick = () => { soundOn = !soundOn; };

  async function checkQueue() {
    const urls = ['https://www.pokemoncenter.com/','https://www.pokemoncenter.com/en-ca/','https://www.pokemoncenter.com/en-gb/'];
    for (let url of urls) {
      try {
        const html = await (await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`)).text();
        if (html.toLowerCase().includes('queueit') || html.includes('virtual queue')) return true;
      } catch(e) {}
    }
    return false;
  }

  async function updateFeed() {
    try {
      const resp = await fetch('https://api.allorigins.win/get?url='+encodeURIComponent(
        'https://rsshub.app/twitter/search/pokemon%20center%20(queue%20OR%20drop%20OR%20restock%20OR%20live)'
      ));
      const data = await resp.json();
      const parser = new DOMParser();
      const xml = parser.parseFromString(data.contents,'text/xml');
      const items = Array.from(xml.querySelectorAll('item')).slice(0,8);
      document.getElementById('feed').innerHTML = items.map(i=>{
        const title = i.querySelector('title').textContent;
        const age = Math.round((Date.now() - new Date(i.querySelector('pubDate').textContent)) / 60000);
        return `<div class="intel-item ${age<6?'fresh':''}">${title}<br><small>${age} min ago</small></div>`;
      }).join('') || '<div style="opacity:0.6;">Quiet on the grid...</div>';
    } catch(e) {
      document.getElementById('feed').innerHTML = '<div style="opacity:0.6;">Feed temporarily down</div>';
    }
  }

  async function scan() {
    const live = await checkQueue();
    const q = document.getElementById('queue');
    const icon = document.getElementById('queueIcon');
    const label = document.getElementById('queueLabel');

    if (live && !queueLive) {
      queueLive = true;
      icon.textContent = 'Red Circle';
      label.textContent = 'QUEUE LIVE';
      q.classList.add('live');
      if (soundOn) sound.play();
      if (Notification.permission === 'granted') new Notification('QUEUE LIVE!', {body: 'Pokémon Center queue detected!'});
    } else if (!live && queueLive) {
      queueLive = false;
      icon.textContent = 'Green Circle';
      label.textContent = 'NO QUEUE';
      q.classList.remove('live');
    }
    updateFeed();
  }

  scan();
  setInterval(scan, 10000);
</script>
</body>
</html>
