<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>USA COMMAND CENTER v14 • CLICK STORE → GO TO PRODUCT</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
<style>
    :root {
        --bg: #000000;
        --glass: rgba(10,12,20,0.72);
        --glass-light: rgba(20,25,40,0.6);
        --border: rgba(100,200,255,0.15);
        --cyan: #00eeff;
        --pink: #ff00aa;
        --gold: #ffd700;
        --safe: #00ff88;
        --text: #e0f8ff;
        --text-dim: #88c8e0;
        --pc: #0088ff;
        --target: #d40000;
        --walmart: #0066cc;
        --sams: #002663;
        --bestbuy: #0046b3;
        --gamestop: #e65100;
        --amazon: #ff9900;
    }
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
        background:var(--bg);color:var(--text);font-family:'Inter',sans-serif;
        min-height:100vh;display:flex;flex-direction:column;align-items:center;
        padding:25px 15px 140px;
        background-image:
            radial-gradient(circle at 15% 85%, rgba(0,238,255,0.08), transparent 50%),
            radial-gradient(circle at 85% 15%, rgba(255,0,170,0.08), transparent 50%);
    }
    body::before{
        content:'';position:fixed;top:0;left:0;width:100%;height:100%;
        background:radial-gradient(circle at 50% 50%, rgba(0,100,255,0.03), transparent 70%);
        pointer-events:none;z-index:-1;
    }
    h1{
        font-family:'Orbitron',sans-serif;font-size:clamp(2.6rem,8vw,4.8rem);
        letter-spacing:0.2em;background:linear-gradient(90deg,#e0f8ff,var(--cyan));
        -webkit-background-clip:text;-webkit-text-fill-color:transparent;
        text-shadow:0 0 30px rgba(0,238,255,0.3);margin-bottom:6px;
    }
    .tagline{font-size:1.1rem;opacity:0.85;letter-spacing:4px;color:var(--text-dim);}

    .search-section{
        width:100%;max-width:900px;margin:25px 0;display:flex;gap:15px;flex-wrap:wrap;justify-content:center;
    }
    #searchInput{
        flex:1;min-width:200px;padding:18px 70px 18px 28px;border-radius:50px;
        background:rgba(20,30,50,0.5);border:1px solid var(--border);
        font-size:1.35rem;color:var(--text);backdrop-filter:blur(12px);
        outline:none;transition:0.4s;
    }
    #searchInput:focus{border-color:var(--cyan);box-shadow:0 0 25px rgba(0,238,255,0.25);}
    .store-filters{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;}
    .filter-btn{
        padding:10px 16px;border-radius:30px;font-size:0.9rem;font-weight:500;
        border:1px solid var(--border);background:rgba(20,30,50,0.5);
        color:var(--text-dim);cursor:pointer;transition:0.3s;backdrop-filter:blur(10px);
        white-space:nowrap;
    }
    .filter-btn:hover,.filter-btn.active{
        background:var(--cyan);color:#000;border-color:var(--cyan);box-shadow:0 0 15px var(--cyan);
    }
    .clear-filters{padding:10px 16px;border-radius:30px;font-size:0.9rem;background:var(--pink);color:#fff;cursor:pointer;transition:0.3s;}
    .clear-filters:hover{box-shadow:0 0 15px var(--pink);}

    .glass{
        width:100%;max-width:900px;background:var(--glass);backdrop-filter:blur(20px);
        border:1px solid var(--border);border-radius:28px;padding:28px;margin-bottom:22px;
        box-shadow:0 20px 60px rgba(0,0,0,0.7), inset 0 0 30px rgba(0,50,100,0.1);
    }

    .drop-item{
        background:rgba(20,30,50,0.4);border-radius:18px;padding:20px;margin:14px 0;
        border-left:4px solid transparent;transition:0.4s;backdrop-filter:blur(10px);
    }
    .drop-item:hover{
        transform:translateX(12px);background:rgba(30,40,70,0.6);
        border-left-color:var(--cyan);box-shadow:0 10px 30px rgba(0,0,0,0.4);
    }
    .drop-item.live { border-left-color: var(--safe); background: rgba(0,255,136,0.1); }
    .badges{display:flex;gap:8px;flex-wrap:wrap;margin-right:12px;}
    .badge{
        display:inline-flex;gap:4px;align-items:center;padding:6px 12px;border-radius:30px;font-size:0.78rem;
        font-weight:bold;color:#fff;cursor:pointer;transition:0.3s;
    }
    .badge:hover{transform:scale(1.1);box-shadow:0 0 15px rgba(255,255,255,0.3);}
    .pc-badge{background:var(--pc);}
    .target-badge{background:var(--target);}
    .walmart-badge{background:var(--walmart);}
    .sams-badge{background:var(--sams);}
    .bestbuy-badge{background:var(--bestbuy);}
    .gamestop-badge{background:var(--gamestop);}
    .amazon-badge{background:var(--amazon);}
    .stock-status { font-size: 0.7rem; padding: 2px 6px; border-radius: 8px; font-weight: bold; min-width: 45px; text-align: center; }
    .stock-live { background: var(--safe); color: #000; }
    .stock-out { background: #ff4444; color: #fff; }
    .stock-pre { background: var(--gold); color: #000; }
    .date{font-family:'Orbitron',sans-serif;font-size:1.3rem;display:flex;align-items:center;gap:12px;flex-wrap:wrap;color:var(--text);}
    .conf{font-size:0.88rem;opacity:0.9;color:var(--cyan);}
    .name{font-size:1.32rem;font-weight:600;margin:10px 0 6px;color:var(--text);}
    .source{font-size:0.88rem;color:var(--pink);font-style:italic;opacity:0.9;}

    /* FIXED DOCK - Perfect mobile behavior */
    .dock{
        position:fixed;
        bottom:18px;
        left:50%;
        transform:translateX(-50%);
        display:flex;
        gap:14px;
        padding:18px 28px;
        background:var(--glass);
        backdrop-filter:blur(22px);
        border:1px solid var(--border);
        border-radius:70px;
        box-shadow:0 25px 60px rgba(0,0,0,0.8);
        z-index:9999;
        flex-wrap:nowrap;
        overflow-x:auto;
        overflow-y:hidden;
        white-space:nowrap;
        max-width:95vw;
        scrollbar-width:none;
        -ms-overflow-style:none;
    }
    .dock::-webkit-scrollbar { display:none; }

    /* Optional scroll hint handles */
    .dock::before, .dock::after {
        content:"";
        position:absolute;
        top:50%;
        width:6px;
        height:32px;
        background:rgba(255,255,255,0.15);
        border-radius:3px;
        transform:translateY(-50%);
    }
    .dock::before { left:12px; }
    .dock::after { right:12px; }

    .btn{
        width:60px;
        height:60px;
        border-radius:50%;
        border:none;
        cursor:pointer;
        font-size:1.7rem;
        color:#fff;
        transition:0.4s;
        display:flex;
        align-items:center;
        justify-content:center;
        background:rgba(255,255,255,0.08);
        backdrop-filter:blur(10px);
        flex-shrink:0;
    }
    .btn:hover{transform:translateY(-10px) scale(1.18);background:rgba(255,255,255,0.18);}
    .pc-btn{background:var(--pc);box-shadow:0 0 30px var(--pc);}
    .target-btn{background:var(--target);box-shadow:0 0 30px var(--target);}
    .walmart-btn{background:var(--walmart);box-shadow:0 0 30px var(--walmart);}
    .sams-btn{background:var(--sams);box-shadow:0 0 30px var(--sams);}
    .bestbuy-btn{background:var(--bestbuy);box-shadow:0 0 30px var(--bestbuy);}
    .gamestop-btn{background:var(--gamestop);box-shadow:0 0 30px var(--gamestop);}
    .amazon-btn{background:var(--amazon);box-shadow:0 0 30px var(--amazon);}
    .alarm.active{color:var(--pink);border:3px solid var(--pink);animation:glow 2s infinite;}
    @keyframes glow{0%,100%{box-shadow:0 0 25px var(--pink)}50%{box-shadow:0 0 50px var(--pink)}}

    /* Slightly smaller buttons on tiny screens */
    @media (max-width: 480px) {
        .dock { gap:10px; padding:14px 20px; }
        .btn { width:52px; height:52px; font-size:1.4rem; }
    }
</style>
</head>
<body>

<h1>COMMAND CENTER v14</h1>
<div class="tagline">USA • CLICK STORE BADGE → GO TO PRODUCT</div>

<div class="search-section">
    <input type="text" id="searchInput" placeholder="Search: Prismatic, Mega, ETB..." autocomplete="off">
    <div class="store-filters">
        <button class="filter-btn" data-store="pc">PC</button>
        <button class="filter-btn" data-store="target">Target</button>
        <button class="filter-btn" data-store="walmart">Walmart</button>
        <button class="filter-btn" data-store="sams">Sam's</button>
        <button class="filter-btn" data-store="bestbuy">Best Buy</button>
        <button class="filter-btn" data-store="gamestop">GameStop</button>
        <button class="filter-btn" data-store="amazon">Amazon</button>
        <button class="filter-btn active" data-store="all">All</button>
    </div>
    <button class="clear-filters" onclick="clearFilters()">Clear</button>
</div>

<div class="glass">
    <h2 style="text-align:center;color:var(--cyan);font-family:'Orbitron',sans-serif;margin-bottom:22px;">
        LIVE USA DROP RADAR <span style="font-size:0.7rem;">(Click any store badge → go to product)</span>
    </h2>
    <div id="dropList">Loading live intel...</div>
</div>

<div class="dock">
    <button class="btn pc-btn" onclick="window.open('https://www.pokemoncenter.com','_blank')">PC</button>
    <button class="btn target-btn" onclick="window.open('https://www.target.com/c/pokemon-trading-card-game-toys/-/N-5xtbm','_blank')">Target</button>
    <button class="btn walmart-btn" onclick="window.open('https://www.walmart.com/search?q=pokemon+tcg','_blank')">W</button>
    <button class="btn sams-btn" onclick="window.open('https://www.samsclub.com/s/pokemon','_blank')">S</button>
    <button class="btn bestbuy-btn" onclick="window.open('https://www.bestbuy.com/site/searchpage.jsp?st=pokemon+tcg','_blank')">BB</button>
    <button class="btn gamestop-btn" onclick="window.open('https://www.gamestop.com/toys-games/trading-cards','_blank')">GS</button>
    <button class="btn amazon-btn" onclick="window.open('https://www.amazon.com/s?k=pokemon+tcg','_blank')">A</button>
    <button class="btn" onclick="fullScan()">Lightning</button>
    <button class="btn alarm active" id="alarmBtn">Bell</button>
</div>

<script>
const sound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-sci-fi-interface-beep-1007.mp3');
let alarmOn = true;
let lastAlert = {pc:false,target:true,walmart:true,sams:false,bestbuy:false,gamestop:false,amazon:true};
let activeFilters = ['all'];

// Real product URLs (updated based on latest data as of Dec 2025)
const productLinks = {
    "Mega Evolution Ascended Heroes Blister Pack & Collection": {
        pc: "https://www.pokemoncenter.com/search?q=ascended+heroes",
        walmart: "https://www.walmart.com/search?q=mega+evolution+ascended+heroes",
        target: "https://www.target.com/s?searchTerm=mega+evolution+ascended+heroes",
        amazon: "https://www.amazon.com/s?k=mega+evolution+ascended+heroes",
        bestbuy: "https://www.bestbuy.com/site/searchpage.jsp?st=mega+evolution+ascended+heroes",
        gamestop: "https://www.gamestop.com/search/?q=mega+evolution+ascended+heroes"
    },
    "Mega Evolution Ascended Heroes Elite Trainer Box & Mini Tin": {
        pc: "https://www.pokemoncenter.com/search?q=ascended+heroes+etb",
        walmart: "https://www.walmart.com/search?q=ascended+heroes+etb",
        target: "https://www.target.com/s?searchTerm=ascended+heroes+etb",
        amazon: "https://www.amazon.com/s?k=ascended+heroes+etb",
        bestbuy: "https://www.bestbuy.com/site/searchpage.jsp?st=ascended+heroes+etb",
        gamestop: "https://www.gamestop.com/search/?q=ascended+heroes+etb"
    }
};

// Updated drops based on latest sources (Dexerto, PokeGuardian, Pokémon.com - as of Dec 6, 2025)
let drops = [
    {date:"2026-01-20",name:"Mega Evolution Ascended Heroes Special Set",stores:["pc","target","walmart","amazon","bestbuy","gamestop"],stockStatus:{"pc":"pre","target":"pre","walmart":"pre","amazon":"pre","bestbuy":"pre","gamestop":"pre"},conf:100,src:"PokeGuardian"},
    {date:"2026-01-30",name:"Mega Evolution Ascended Heroes Main Expansion (290+ Cards)",stores:["pc","target","walmart","amazon","bestbuy","gamestop"],stockStatus:{"pc":"out","target":"out","walmart":"out","amazon":"out","bestbuy":"out","gamestop":"out"},conf:100,src:"Dexerto"},
    {date:"2026-01-30",name:"Mega Evolution Ascended Heroes Blister Pack & Collection",stores:["pc","target","walmart","amazon","bestbuy","gamestop"],stockStatus:{"pc":"out","target":"out","walmart":"out","amazon":"out","bestbuy":"out","gamestop":"out"},conf:100,src:"Dexerto"},
    {date:"2026-02-20",name:"Mega Evolution Ascended Heroes Elite Trainer Box & Mini Tin",stores:["pc","target","walmart","amazon","bestbuy","gamestop"],stockStatus:{"pc":"out","target":"out","walmart":"out","amazon":"out","bestbuy":"out","gamestop":"out"},conf:100,src:"Dexerto"}
];

// Placeholder for dynamic loading - uncomment and set your JSON URL to make it update automatically
// async function fetchDrops() {
//     try {
//         const response = await fetch('https://your-server.com/drops.json'); // Replace with your JSON endpoint
//         drops = await response.json();
//         render();
//     } catch (e) {
//         console.error('Failed to fetch drops:', e);
//     }
// }
// fetchDrops(); // Call on load for dynamic update

function render(filter = "", selectedStores = []) {
    const list = document.getElementById("dropList");
    list.innerHTML = "";
    const now = new Date("2025-12-06");
    let future = drops.filter(d => new Date(d.date) > now);

    if (filter) {
        const lower = filter.toLowerCase();
        future = future.filter(d => 
            d.name.toLowerCase().includes(lower) ||
            d.stores.some(s => s.toLowerCase().includes(lower))
        );
    }
    if (selectedStores.length && !selectedStores.includes('all')) {
        future = future.filter(d => d.stores.some(s => selectedStores.includes(s)));
    }

    future.sort((a,b) => new Date(a.date) - new Date(b.date));

    if (future.length === 0) {
        list.innerHTML = `<p style="text-align:center;padding:40px;opacity:0.7;font-size:1.2rem;">No matching drops - check back for updates!</p>`;
        return;
    }

    future.forEach(d => {
        const item = document.createElement("div");
        item.className = "drop-item";

        const badgesHTML = d.stores.map(store => {
            const name = store.toUpperCase();
            const cls = store + "-badge";
            const stock = d.stockStatus[store] || "out";
            let stockClass = "stock-out", stockText = "OUT";
            if (stock === "live") { stockClass = "stock-live"; stockText = "IN STOCK"; }
            else if (stock === "pre") { stockClass = "stock-pre"; stockText = "PRE-ORDER"; }

            const productUrl = (productLinks[d.name] && productLinks[d.name][store]) 
                || getStoreSearchUrl(store, d.name);

            return `<a href="\( {productUrl}" target="_blank" class="badge \){cls}" style="text-decoration:none;">
                <span class="stock-status \( {stockClass}"> \){stockText}</span> ${name}
            </a>`;
        }).join("");

        const conf = d.conf >= 98 ? "DIAMOND CONFIRMED" : d.conf >= 92 ? "FIRE HIGH" : "LIGHTNING LIKELY";

        item.innerHTML = `
            <div class="date">
                <div class="badges">${badgesHTML}</div>
                ${new Date(d.date).toLocaleDateString('en-US',{month:'short',day:'numeric'})}
                <span class="conf">• ${conf}</span>
            </div>
            <div class="name">${d.name}</div>
            <div class="source">Source: ${d.src}</div>
        `;
        list.appendChild(item);
    });
}

function getStoreSearchUrl(store, name) {
    const q = encodeURIComponent(name.split(" (")[0]);
    const urls = {
        pc: `https://www.pokemoncenter.com/search?q=${q}`,
        target: `https://www.target.com/s?searchTerm=${q}`,
        walmart: `https://www.walmart.com/search?q=${q}`,
        sams: `https://www.samsclub.com/s/${q}`,
        bestbuy: `https://www.bestbuy.com/site/searchpage.jsp?st=${q}`,
        gamestop: `https://www.gamestop.com/search/?q=${q}`,
        amazon: `https://www.amazon.com/s?k=${q}`
    };
    return urls[store] || "#";
}

// Filter & Search Logic
document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        activeFilters = [btn.dataset.store];
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        render(document.getElementById("searchInput").value, activeFilters);
    });
});
function clearFilters() {
    activeFilters = ['all'];
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    document.querySelector('[data-store="all"]').classList.add('active');
    render(document.getElementById("searchInput").value, activeFilters);
}
let searchTimeout;
document.getElementById("searchInput").addEventListener("input", e => {
    clearTimeout(searchTimeout);
    searchTimeout = setTimeout(() => render(e.target.value, activeFilters), 300);
});

// Placeholder for live scanning (you can expand later)
async function fullScan() {
    console.log("Lightning scan running...");
    // To make more dynamic, could fetch stock status here via API if available
}
setInterval(fullScan, 8000);
setInterval(()=>render(document.getElementById("searchInput").value, activeFilters), 60000);

render();
if(Notification.permission==="default") Notification.requestPermission();
</script>
</body>
</html>
