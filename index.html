<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>USA COMMAND CENTER v8 • TRUE DARK + GLASS + 100% DYNAMIC</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
<style>
    :root {
        --bg: #000000;
        --glass: rgba(10,12,20,0.72);
        --glass-light: rgba(20,25,40,0.6);
        --border: rgba(100,200,255,0.15);
        --cyan: #00eeff;
        --pink: #ff00aa;
        --gold: #ffd700;
        --text: #e0f8ff;
        --text-dim: #88c8e0;
        --pc: #0088ff;
        --target: #d40000;
        --walmart: #0066cc;
        --sams: #002663;
        --bestbuy: #0046b3;
        --gamestop: #e65100;
        --amazon: #ff9900;
    }
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
        background:var(--bg);color:var(--text);font-family:'Inter',sans-serif;
        min-height:100vh;display:flex;flex-direction:column;align-items:center;
        padding:25px 15px 140px;
        background-image:
            radial-gradient(circle at 15% 85%, rgba(0,238,255,0.08), transparent 50%),
            radial-gradient(circle at 85% 15%, rgba(255,0,170,0.08), transparent 50%);
    }
    body::before{
        content:'';position:fixed;top:0;left:0;width:100%;height:100%;
        background:radial-gradient(circle at 50% 50%, rgba(0,100,255,0.03), transparent 70%);
        pointer-events:none;z-index:-1;
    }
    h1{
        font-family:'Orbitron',sans-serif;font-size:clamp(2.6rem,8vw,4.8rem);
        letter-spacing:0.2em;background:linear-gradient(90deg,#e0f8ff,var(--cyan));
        -webkit-background-clip:text;-webkit-text-fill-color:transparent;
        text-shadow:0 0 30px rgba(0,238,255,0.3);margin-bottom:6px;
    }
    .tagline{font-size:1.1rem;opacity:0.85;letter-spacing:4px;color:var(--text-dim);}

    .search-bar{
        width:100%;max-width:900px;margin:25px 0;position:relative;
    }
    #searchInput{
        width:100%;padding:18px 70px 18px 28px;border-radius:50px;
        background:rgba(20,30,50,0.5);border:1px solid var(--border);
        font-size:1.35rem;color:var(--text);backdrop-filter:blur(12px);
        outline:none;transition:0.4s;
    }
    #searchInput:focus{border-color:var(--cyan);box-shadow:0 0 25px rgba(0,238,255,0.25);}
    .search-icon{position:absolute;right:22px;top:50%;transform:translateY(-50%);font-size:1.9rem;color:var(--cyan);opacity:0.8;}

    .glass{
        width:100%;max-width:900px;background:var(--glass);backdrop-filter:blur(20px);
        border:1px solid var(--border);border-radius:28px;padding:28px;margin-bottom:22px;
        box-shadow:0 20px 60px rgba(0,0,0,0.7), inset 0 0 30px rgba(0,50,100,0.1);
    }

    .stores{display:flex;justify-content:center;gap:18px;flex-wrap:wrap;padding:15px 0;}
    .store{text-align:center;flex:1;max-width:140px;}
    .orb{
        width:68px;height:68px;border-radius:50%;margin:0 auto 14px;
        box-shadow:0 0 40px rgba(0,0,0,0.6);transition:all 0.5s;position:relative;
        background:var(--glass-light);border:2px solid var(--border);
    }
    .orb.live{
        animation:pulse 1.6s infinite;
        box-shadow:0 0 60px !important;
        border-color:var(--cyan);
    }
    .orb::after{
        content:'';position:absolute;inset:-10px;border:2px solid;
        border-radius:50%;opacity:0.6;animation:ripple 3s infinite;
    }
    .label{font-family:'Orbitron',sans-serif;font-size:1rem;letter-spacing:1.2px;color:var(--text-dim);}
    .status{font-size:0.9rem;color:var(--text-dim);margin-top:4px;transition:0.4s;}

    .pc .orb{background:var(--pc);box-shadow:0 0 40px var(--pc);}
    .target .orb{background:var(--target);box-shadow:0 0 40px var(--target);}
    .walmart .orb{background:var(--walmart);box-shadow:0 0 40px var(--walmart);}
    .sams .orb{background:var(--sams);box-shadow:0 0 40px var(--sams);}
    .bestbuy .orb{background:var(--bestbuy);box-shadow:0 0 40px var(--bestbuy);}
    .gamestop .orb{background:var(--gamestop);box-shadow:0 0 40px var(--gamestop);}
    .amazon .orb{background:var(--amazon);box-shadow:0 0 40px var(--amazon);}

    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.18)}}
    @keyframes ripple{0%{transform:scale(1);opacity:0.7}100%{transform:scale(1.9);opacity:0}}

    .drop-item{
        background:rgba(20,30,50,0.4);border-radius:18px;padding:20px;margin:14px 0;
        border-left:4px solid transparent;transition:0.4s;backdrop-filter:blur(10px);
    }
    .drop-item:hover{
        transform:translateX(12px);background:rgba(30,40,70,0.6);
        border-left-color:var(--cyan);box-shadow:0 10px 30px rgba(0,0,0,0.4);
    }
    .badge{
        display:inline-block;padding:7px 16px;border-radius:30px;font-size:0.82rem;
        font-weight:bold;color:#fff;margin-right:12px;
    }
    .pc-badge{background:var(--pc);}
    .target-badge{background:var(--target);}
    .walmart-badge{background:var(--walmart);}
    .sams-badge{background:var(--sams);}
    .bestbuy-badge{background:var(--bestbuy);}
    .gamestop-badge{background:var(--gamestop);}
    .amazon-badge{background:var(--amazon);}
    .multi-badge{background:var(--gold);}
    .date{font-family:'Orbitron',sans-serif;font-size:1.3rem;display:flex;align-items:center;gap:12px;flex-wrap:wrap;color:var(--text);}
    .conf{font-size:0.88rem;opacity:0.9;color:var(--cyan);}
    .name{font-size:1.32rem;font-weight:600;margin:10px 0 6px;color:var(--text);}
    .source{font-size:0.88rem;color:var(--pink);font-style:italic;opacity:0.9;}

    .dock{
        position:fixed;bottom:18px;left:50%;transform:translateX(-50%);
        display:flex;gap:14px;padding:20px 38px;background:var(--glass);
        backdrop-filter:blur(22px);border:1px solid var(--border);
        border-radius:70px;box-shadow:0 25px 60px rgba(0,0,0,0.8);z-index:9999;
        flex-wrap:wrap;justify-content:center;
    }
    .btn{
        width:60px;height:60px;border-radius:50%;border:none;cursor:pointer;
        font-size:1.7rem;color:#fff;transition:0.4s;display:flex;align-items:center;justify-content:center;
        background:rgba(255,255,255,0.08);backdrop-filter:blur(10px);
    }
    .btn:hover{transform:translateY(-10px) scale(1.18);background:rgba(255,255,255,0.18);}
    .pc-btn{background:var(--pc);box-shadow:0 0 30px var(--pc);}
    .target-btn{background:var(--target);box-shadow:0 0 30px var(--target);}
    .walmart-btn{background:var(--walmart);box-shadow:0 0 30px var(--walmart);}
    .sams-btn{background:var(--sams);box-shadow:0 0 30px var(--sams);}
    .bestbuy-btn{background:var(--bestbuy);box-shadow:0 0 30px var(--bestbuy);}
    .gamestop-btn{background:var(--gamestop);box-shadow:0 0 30px var(--gamestop);}
    .amazon-btn{background:var(--amazon);box-shadow:0 0 30px var(--amazon);}
    .alarm.active{color:var(--pink);border:3px solid var(--pink);animation:glow 2s infinite;}
    @keyframes glow{0%,100%{box-shadow:0 0 25px var(--pink)}50%{box-shadow:0 0 50px var(--pink)}}
</style>
</head>
<body>

<h1>COMMAND CENTER v8</h1>
<div class="tagline">USA • TRUE DARK • GLASS • 100% DYNAMIC LIVE</div>

<div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search products, sets, ETB..." autocomplete="off">
    <div class="search-icon">Search</div>
</div>

<div class="glass">
    <div class="stores">
        <div class="store pc"><div class="orb" id="pcOrb"></div><div class="label">PC</div><div class="status" id="pcStatus">Scanning</div></div>
        <div class="store target"><div class="orb" id="targetOrb"></div><div class="label">TARGET</div><div class="status" id="targetStatus">Quiet</div></div>
        <div class="store walmart"><div class="orb" id="walmartOrb"></div><div class="label">WALMART</div><div class="status" id="walmartStatus">Steady</div></div>
        <div class="store sams"><div class="orb" id="samsOrb"></div><div class="label">SAM'S</div><div class="status" id="samsStatus">Monitoring</div></div>
        <div class="store bestbuy"><div class="orb" id="bestbuyOrb"></div><div class="label">BEST BUY</div><div class="status" id="bestbuyStatus">Offline</div></div>
        <div class="store gamestop"><div class="orb" id="gamestopOrb"></div><div class="label">GAMESTOP</div><div class="status" id="gamestopStatus">Offline</div></div>
        <div class="store amazon"><div class="orb" id="amazonOrb"></div><div class="label">AMAZON</div><div class="status" id="amazonStatus">Quiet</div></div>
    </div>
</div>

<div class="glass">
    <h2 style="text-align:center;color:var(--cyan);font-family:'Orbitron',sans-serif;margin-bottom:22px;">
        LIVE USA DROP RADAR <span style="font-size:0.7rem;">(100% Real Scraped • Future Only)</span>
    </h2>
    <div id="dropList">Initializing live intel feed...</div>
</div>

<div class="dock">
    <button class="btn pc-btn" onclick="window.open('https://www.pokemoncenter.com','_blank')">PC</button>
    <button class="btn target-btn" onclick="window.open('https://www.target.com/c/pokemon-trading-card-game-toys/-/N-5xtbm','_blank')">Target</button>
    <button class="btn walmart-btn" onclick="window.open('https://www.walmart.com/search?q=pokemon+tcg','_blank')">W</button>
    <button class="btn sams-btn" onclick="window.open('https://www.samsclub.com/s/pokemon','_blank')">S</button>
    <button class="btn bestbuy-btn" onclick="window.open('https://www.bestbuy.com/site/searchpage.jsp?st=pokemon+tcg','_blank')">BB</button>
    <button class="btn gamestop-btn" onclick="window.open('https://www.gamestop.com/toys-games/trading-cards','_blank')">GS</button>
    <button class="btn amazon-btn" onclick="window.open('https://www.amazon.com/s?k=pokemon+tcg','_blank')">A</button>
    <button class="btn" onclick="fullScan()" title="Force Scan">Lightning</button>
    <button class="btn alarm active" id="alarmBtn" title="Alarm">Bell</button>
</div>

<script>
const sound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-sci-fi-interface-beep-1007.mp3');
let alarmOn = true;
let lastAlert = {pc:false,target:false,walmart:false,sams:false,bestbuy:false,gamestop:false,amazon:false};

// 100% DYNAMIC — NO SIMULATED DATA
let drops = [];

// Real-time fetch from public sources (PokeBeach RSS + X semantic + Reddit)
async function fetchRealDrops() {
    const sources = [
        // PokeBeach (official releases)
        'https://corsproxy.io/?' + encodeURIComponent('https://www.pokebeach.com/feed/'),
        // X semantic search (public tweets)
        'https://corsproxy.io/?' + encodeURIComponent('https://x.com/search?q=pokemon+tcg+drop+OR+restock+OR+live+OR+queue+lang%3Aen+since%3A2025-12-01&src=typed_query&f=live'),
        // Reddit (hot posts)
        'https://corsproxy.io/?' + encodeURIComponent('https://www.reddit.com/r/PokemonTCG/new.json?limit=50')
    ];

    const newDrops = [];

    for (const url of sources) {
        try {
            const res = await fetch(url);
            if (!res.ok) continue;
            const text = await res.text();

            // Extract future USA drops from real text
            const futureDates = text.match(/\b(2025-12-(0[7-9]|[12]\d|3[01])|2026-[01]\d{2})\b/g) || [];
            const products = text.match(/(Prismatic|Evolving|Ascended|Surging|Paldean|Great Tusk|Iron Treads|Lucario|Blaziken|Venusaur|Kangaskhan|ETB|Bundle|Premium|Collection|Tin|Chest)/gi) || [];

            if (futureDates.length && products.length) {
                const date = futureDates[0];
                const name = products.slice(0, 6).join(' ');
                const storeMatch = text.match(/(Target|Walmart|Sam.?s|Best Buy|GameStop|Amazon|Pokémon Center|PC)/i);
                const store = storeMatch ? storeMatch[0].toLowerCase().replace('pokémon center','pc').replace('sam.?s','sams') : 'multi';

                if (!drops.some(d => d.name.includes(name) && d.date === date)) {
                    newDrops.push({
                        date,
                        time: "TBD",
                        name: name + " Drop",
                        store,
                        conf: text.includes("confirmed") || text.includes("official") ? 100 : 88,
                        src: url.includes('pokebeach') ? "PokeBeach" : url.includes('x.com') ? "X Live" : "Reddit"
                    });
                }
            }
        } catch(e) {}
    }

    if (newDrops.length) {
        drops = [...drops, ...newDrops].sort((a,b) => new Date(a.date) - new Date(b.date));
        render(document.getElementById("searchInput").value);
    }
}

// Live stock detection (real HTML scrape)
async function checkStore(url, keywords) {
    try {
        const res = await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`);
        const html = await res.text();
        const hasCart = html.includes("Add to cart") || html.includes("Add to Cart") || html.includes("queueit");
        return hasCart && keywords.some(k => html.includes(k));
    } catch { return false; }
}

async function fullScan() {
    const checks = await Promise.all([
        checkStore('https://www.pokemoncenter.com', ['Venusaur','Kangaskhan','Lucario','queueit']),
        checkStore('https://www.target.com/s?searchTerm=pokemon+tcg', ['Prismatic','Venusaur','Kangaskhan']),
        checkStore('https://www.walmart.com/search?q=pokemon+tcg', ['Collector Chest','Tin','ETB']),
        checkStore('https://www.samsclub.com/s/pokemon', ['Bundle','Prismatic']),
        checkStore('https://www.bestbuy.com/site/searchpage.jsp?st=pokemon+tcg', ['Ascended','Venusaur']),
        checkStore('https://www.gamestop.com/search/?q=pokemon+tcg', ['Kangaskhan','Lucario']),
        checkStore('https://www.amazon.com/s?k=pokemon+tcg', ['Blaziken','Premium'])
    ]);

    const stores = ['pc','target','walmart','sams','bestbuy','gamestop','amazon'];
    checks.forEach((live, i) => {
        const store = stores[i];
        update(store, live, "LIVE", "Normal");
        if (live && !lastAlert[store]) {
            if (alarmOn) sound.play().catch(()=>{});
            if (Notification.permission === "granted")
                new Notification("DROP LIVE", {body: store.toUpperCase() + " just went live!", icon: "https://i.imgur.com/7p2Z8.png"});
        }
        lastAlert[store] = live;
    });
}

function update(store, live, on, off) {
    document.getElementById(store+"Orb").classList.toggle("live", live);
    document.getElementById(store+"Status").textContent = live ? on : off;
    document.getElementById(store+"Status").style.color = live ? "#ff00ff" : "#88c8e0";
}

function render(filter = "") {
    const list = document.getElementById("dropList");
    list.innerHTML = "";
    const now = new Date();
    const future = drops
        .filter(d => new Date(d.date) > now)
        .filter(d => d.name.toLowerCase().includes(filter.toLowerCase()) || filter === "")
        .slice(0, 20);

    if (future.length === 0) {
        list.innerHTML = `<p style="text-align:center;padding:40px;opacity:0.7;font-size:1.2rem;">
            No confirmed future drops yet<br><small>Live scraping active — new intel appears instantly</small>
        </p>`;
        return;
    }

    future.forEach(d => {
        const item = document.createElement("div");
        item.className = "drop-item";
        const badge = d.store + "-badge";
        const conf = d.conf >= 98 ? "Confirmed" : d.conf >= 90 ? "High" : "Likely";
        item.innerHTML = `
            <div class="date">
                <span class="badge ${badge}">${d.store.toUpperCase()}</span>
                ${new Date(d.date).toLocaleDateString('en-US',{month:'short',day:'numeric'})}
                <span class="conf">${conf}</span>
            </div>
            <div class="name">${d.name}</div>
            <div class="source">Source: ${d.src}</div>
        `;
        list.appendChild(item);
    });
}

// Search
document.getElementById("searchInput").addEventListener("input", e => render(e.target.value));

// Alarm toggle
document.getElementById("alarmBtn").onclick = () => {
    alarmOn = !alarmOn;
    document.getElementById("alarmBtn").classList.toggle("active", alarmOn);
    document.getElementById("alarmBtn").textContent = alarmOn ? "Bell" : "Muted Bell";
};

// Start everything
fetchRealDrops();
fullScan();
setInterval(fullScan, 9000);        // Live stock every 9s
setInterval(fetchRealDrops, 300000); // New drops every 5 min
setInterval(() => render(document.getElementById("searchInput").value), 60000);
if (Notification.permission === "default") Notification.requestPermission();
</script>
</body>
</html>
